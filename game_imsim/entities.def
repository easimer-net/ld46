include 'box2d/box2d.h'

alias b2Fixture;
alias b2Body;

table Entity {
#memory_only
    bUsed: bool;

    position: vec4;
    size: vec4;
    flRotation: float;
    bHasCollider: bool;

#memory_only
#reset
    hSprite : Shared_Sprite;
}

table Phys_Static {
#not_owning
    body: *b2Body;
#not_owning
    fixture: *b2Fixture;
}

table Phys_Dynamic {
    density : float;
    friction : float;

#not_owning
    body: *b2Body;
#not_owning
    fixture: *b2Fixture;
}

table Living living {
    flHealth: float;
    flMaxHealth: float;
}

#memory_only
table Corpse {
    flTimeSinceDeath: float;
}

#implements_interface(b2ContactListener)
table Player {
    bKeys : bool[3];

    member_function 'void BeginContact(b2Contact*) override';
    member_function 'void EndContact(b2Contact*) override';
}

table Static_Prop {
    pszSpritePath: char[128];
}

table Player_Spawn {
}

table Key {
    eType : int;
}

table Closed_Door {
    eKeyRequired : int;
}

table Open_Door {
}
